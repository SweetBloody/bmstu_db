# Базы данных. Лекция 8

### Управление параллельным выполнением транзакций
 * пессимистическое управление параллельным выполнением 
* оптимистическое управление параллельным выполнением 

Если в случае пессимистического управления в СУБД не реализованы механизмы блокирования, то при одновременном чтении и изменении одних и тех же данных несколькими пользователями могут возникнуть следущие проблемы:
* проблема последнего изменения 
* проблема "грязного" чтения (Dirty Read) 
* преблема неповторяемого чтения (Non-repeatable or Fuzzy Read)
* проблема чтения фантомов (Phantom)

Уровни изоляции:
* 0 уровень - запрещение "загрязнения" данных 
* 1 уровень - запрешение "грязного" чтения 
* 2 уровень - запрещение неповторяемого чтения 
* 3 уровень - запрещение фантомов 

|Уровень изоляции|"Грязное" чтение|Неповторяющееся чтение|Фантомное чтение|
|---|---|---|---|
|read uncommitted|Да|Да|Да|
|read committed|Нет|Да|Да|
|repeatable read|Нет|Нет|Да|
|snapshot|Нет|Нет|Нет|
|serializable|Нет|Нет|Нет|

### Блокировки
Блокировка - механизм, с помощью которого синхронизуется доступ нескольких пользователей к одному фрагменту данных.

Критерии блокировок:
* гранулярность
* режимы блокировки
* совместимость 
* продолжительность (определяется тремя факторами: типом запроса, уровнем изоляции и наличием\отсутствием других блокировок в системе)

**Эскалация блокировок** связана с тем, что по мере увеличения количества отдельных малых заблокированных объектов накладные расходы, связанные с их поддержной, начинают значительно сказываться на производительности. 
Блокировки длятся дольше, что приводит к спорным ситуациям - чем дольше существует блокировка, тем выше вероятность обращения к заблакированному объекту со стороны другой транзакции. 

Информация о блокировках находится в метаданных.