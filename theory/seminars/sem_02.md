# Базы данных. Семинар 2

### Docker

#### Для чего нам нужен Docker:
* Изолированный запуск приложений в контейнерах
* Упрощение разработки, тестрования и деплоя приложений
* Отсутствие необходимости конфигурировать  среду для запуска - она поставляется вместе с приложением - в контейнере 
* Упрощает масштабируемость приложений и управление их работой с помощью систем оркестрации контейнеров

#### Docker состоит:
* **Docker-демон**. Демон запускается на хост машине. Пользователь не взаимодействует с сервером на прямую, а использует для этого клиент
* **Docker-клиент**. Главный интерфейс в Docker, который получает команды от пользователя и взаимодействует с Docker-демоном

#### Основные понятия Docker:
* **Образ Docker** содержит все, что необходимо для запуска ПО
* **Docker-реестр** хранит образы. Есть публичные и приватные реестры, из которых можно скачать либо загрузить образы
* **Контейнер Docker** - это работающий экземпляр образа. Однако, в отличие от традиционной виртуализации, контейнер Docker работает на ядре операционной системы хоста.

Команды Docker-клиента:
* docker pull - скачать образ из docker reistry и поместить его в локальное хранилище на хосте
* docker build - прочитать докер-файл и собирать образ
* docker run - создать из образа контейнер и запустить его
* docker ps - просмотреть список запущенных контейнеров
* docker stop - "мягкая" остановка контейнера. Можно остановить не конкретный контейнер, а все запущенные - `docker stop S(docker ps -a -q`
* docker kill - "жесткая" остановка контейнера
* docker rm - удалить контейнер
* docker rmi - удалить образ

#### Как поднять базу данных в Docker-е на примере PostgreSQL:  
```
docker run --name my_test_pg -e
POSTGRES_PASSWORD=postgres -p 5432:5432 -d postgres
```

* --name - какое контейнеру будет присвоено имя
* -p - привязка внутреннего порта контейнера к порту сервера

### Примеры работы с языком SQL (DDL, DML)  (TODO)

```sql
drop table if exists public.dinos;
create table public.dinos(
    name text primary key, // primary key - ограничение
    type text [not null], // not null - тоже ограничение
    period text,
    threat_level int default 0,
    speed int default 0,
    protection int default 0
                   check (protection between 0 and 5), // тоже ограничение
    weight numeric(15,2) check (weight > 0), // check - проверка
    length numeric(15,2)
);

// создадим справочник
create table public.type(
    id int,
    name text
);
```



